<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Main</title>
    <script src="../jquery/jquery-3.6.0.min.js"></script>
    <script>
        //main_top컨텐츠 넣어주기
        $.ajax({
            url: '../TopContentServlet?topContent=y',
            data: 'get',
            dataType: 'json',
            success: function (result) {
                console.log(result);
                for (let img of result) {
                    let imgTag = $('<img />').attr({src : '../images/' + img.image});
                    let btn = $('<button />').attr({id :img.code, onclick : "location.href='../DetailPageServlet?code='"+img.code}).append(imgTag);
                    $('#main_top').append(btn.append(imgTag));
                }
            },
            error: function (reject) {
                console.log(reject);
            }
        })

        //main_tv 컨텐츠 넣어주기
        $.ajax({
            url: '../ContentServlet?mOrTv=tv',
            data: 'get',
            dataType: 'json',
            success: function (result) {
                console.log(result);

                for(let img of result){
                	let imgTag = $('<img />').attr({src : '../images/' + img.image});
                	let btn = $('<button />').attr({id :img.code, onclick : "location.href='../DetailPageServlet?code='"+img.code}).append(imgTag);
                    $('#main_tv').append(btn.append(imgTag));
                }
             
            },
            error: function (reject) {
                console.log(reject);
            }
        })

        //main_movie 컨텐츠 넣어주기
        $.ajax({
            url: '../ContentServlet?mOrTv=movie',
            data: 'get',
            dataType: 'json',
            success: function (result) {
                console.log(result);

                for(let img of result){
                	let imgTag = $('<img />').attr({src : '../images/' + img.image});
                	let btn = $('<button />').attr({id :img.code, onclick : "location.href='../DetailPageServlet?code='"+img.code}).append(imgTag);
                    $('#main_movie').append(btn.append(imgTag));
                }
            },
            error: function (reject) {
                console.log(reject);
            }
        })


    </script>
</head>

<body>
    <!--Navigation 기본 구성-->
    <nav>
        <div id="logo">
            <h1 class="nav_logo">YedamFlix</h1>
        </div>
        <div id="menu">
            <form>
                <input type='button' value='홈' onclick="location.href='../main/main.html'">
                <input type='button' value='TV' onclick="location.href='../main/tv2.html'">
                <input type='button' value='영화' onclick="location.href='../main/movie.html'">
            </form>
        </div>
        <div id="btnSearch">
            <input type='text' class="form-control bg-light border-0 small" placeholder="검색">
            <button type="button">검색</button>
        </div>
        <div id="btnLogin">
            <button type="button" onclick="location.href='../login/login.html'">로그인</button>
        </div>
    </nav>

    <!--Page Content-->
    <!--기본 콘텐츠 슬라이드-->
    <section>
        <div id="main_top" class="model"></div>
    </section>

    <!-- 지금 뜨는 TV-->
    <section>
        <div>
            <h3>지금 뜨는 TV</h3>
        </div>
        
        <div id="main_tv"></div>
    </section>

    <!-- 지금 뜨는 영화-->
    <section>
        <div>
            <h3>지금 뜨는 영화</h3>
        </div>
        
        <div id="main_movie"></div>
    </section>
</body>

</html>